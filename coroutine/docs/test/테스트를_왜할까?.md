# 테스트 왜 작성할까?

프로젝트의 지속가능한 성장을 위해

테스트가 없는 프로젝트는 처음에는 발목 잡을 일이 없기에 빠르게 성장 가능하지만
결국에는 많은 문제가 생기면 리팩토링 및 버그 픽스하는데 많은 시간을 할애하게 됩니다.
이때, 테스트가 프로젝트에 안전망

만약, 잘못된 테스트 질이 안좋은 테스트를 포함한다면 오히려 테스트가 없는 경우가 더 좋은 경우다

# 단위 테스트
https://www.youtube.com/watch?v=mIO4Rbe_M74

> 어플리케이션 안에 있는 `개별적인 코드 단위`가 `의도한 대로 작동`하는지 확인하는 행위

여러 기능이 있으면 이 하나하나의 기능이 잘 작동하는지 보는 테스트

## 단위 테스트 왜 사용 해야 하는가?

큰 기능을 작은 기능으로 쪼개 테스트함
-> 원하는 부분만 테스트함으로 결과를 빠르게 볼 수 있다 (빠르게 검증)
-> 미리 작성한 단위 테스트를 기반으로 프로덕션 코드의 리팩토링을 안정적으로 할 수 있다. (리팩토링 안정적)
-> 단위 테스트가 실패하는 지점에서 문제점을 빠르게 찾을 수 있다. (문제점 빠르게 찾을 수 잇음)

# 단위 테스트 예시

장바구니 ..

# First 원칙

효율적이고 좋은 단위테스트를 위한 5가지 원칙

F: 단위 테스트는 빨라야한다.
I: 테스트는 독립적으로 동작해야한다 (각 테스트는 모두 독립적인 모듈이다)
R: 어떤 상황에서든 같은 테스트 결과가 나와야 한다. (멱등성)
S: print or log 가 아닌 테스트 자체적으로 결과가 나와야한다
T: 적시에 테스트를 철저하게 작성해야 한다. (테스트를 미루지 말자)

---

# Given-When-Then 패턴: 테스트 코드의 가독성이 좋아 유지보수 굿
테스트 코드 작성의 표현 방식

Arrange(준비): 테스트 대상을 준비물
Act(실행): 테스트 대상 시스템 메서드를 호출하고 결과, 출력값이 있다면 저장 
Assert(검증): 결과를 검증

# 안좋은 단위 테스트 예시

## 1. 여러 개의 준비, 실행 검증 
준비, 실행, 검증 -> 실행 -> 검증

이는 단위 테스트가 아닌 통합테스트다

단위테스트는 빠르고 간단하게 작성해야하는 first 원칙을 위배하고 있다.

"구매를 성공하고 재고가 감소한다"

실행 구절이 2줄 이상이다.

비지니스 관점

행동: 물품 구매 
-> 결과 1) 재고 감소
-> 결과 2) 고객이 물품 획득

즉 구매 -> 재고 감소 라는 이 사이클이 2개의 프로세스로 분리되어 실수할 위험이 있음
-> 이는 위험하다 (실수 여지 있음)
-> 프로덕트 코드가 잘못됐나? 의심할 수 있음

## 2. 세부 구현에 의존적인 테스트
세부구현은 언제든지 바뀔 수 있는 것 (만약, 10개까지만 장바구니 추가 가능 -> 12개로 바뀌면?)
공개된 public 한 메서드 만을 사용하여 테스트하는 것이 좋다.


[[10분 테코톡] 도도의 좋은 단위 테스트란
](https://www.youtube.com/watch?v=R7spoJFfQ7U&t=55s)  

[[드로이드나이츠 2021] 강사룡 - Android Testing Best Practices
](https://www.youtube.com/watch?v=D_tWlb2deX8&t=1232s)